"use strict";(globalThis.webpackChunksaturn_cli_docs=globalThis.webpackChunksaturn_cli_docs||[]).push([[376],{3263:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>g,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"getting-started/examples","title":"Getting Started Examples","description":"This page provides practical examples to help you get familiar with Saturn CLI concepts and usage patterns.","source":"@site/docs/getting-started/examples.md","sourceDirName":"getting-started","slug":"/getting-started/examples","permalink":"/saturncli/docs/getting-started/examples","draft":false,"unlisted":false,"editUrl":"https://github.com/Kingson4Wu/saturncli/tree/main/documentation/docs/getting-started/examples.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Quick Start","permalink":"/saturncli/docs/getting-started/quick-start"},"next":{"title":"Saturn CLI Architecture - Client Server Design & Unix Socket Communication","permalink":"/saturncli/docs/architecture"}}');var s=t(4848),i=t(8453);const a={sidebar_position:3},o="Getting Started Examples",l={},c=[{value:"Simple Job Example",id:"simple-job-example",level:2},{value:"Stoppable Job with Progress",id:"stoppable-job-with-progress",level:2},{value:"File Processing Example",id:"file-processing-example",level:2},{value:"Embedding in a Web Service",id:"embedding-in-a-web-service",level:2},{value:"Testing Your Examples",id:"testing-your-examples",level:2},{value:"Running Examples",id:"running-examples",level:2},{value:"Source Code References",id:"source-code-references",level:2},{value:"Next Steps",id:"next-steps",level:2}];function u(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"getting-started-examples",children:"Getting Started Examples"})}),"\n",(0,s.jsx)(n.p,{children:"This page provides practical examples to help you get familiar with Saturn CLI concepts and usage patterns."}),"\n",(0,s.jsx)(n.h2,{id:"simple-job-example",children:"Simple Job Example"}),"\n",(0,s.jsx)(n.p,{children:"Let's start with a basic job registration and execution:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'// server.go\npackage main\n\nimport (\n    "fmt"\n    "log"\n    \n    "github.com/Kingson4Wu/saturncli/server"\n    "github.com/Kingson4Wu/saturncli/utils"\n)\n\nfunc main() {\n    // Register a simple job\n    if err := server.AddJob("echo", func(args map[string]string, signature string) bool {\n        message := args["message"]\n        fmt.Printf("[%s] Echo: %s\\n", signature, message)\n        return true\n    }); err != nil {\n        log.Fatal("Failed to register job:", err)\n    }\n    \n    fmt.Println("Server running on /tmp/echo.sock")\n    server.NewServer(&utils.DefaultLogger{}, "/tmp/echo.sock").Serve()\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Execute with:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"go run server.go\n"})}),"\n",(0,s.jsx)(n.p,{children:"In another terminal:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'./saturn_cli --name echo --param message="Hello, World!"\n'})}),"\n",(0,s.jsx)(n.h2,{id:"stoppable-job-with-progress",children:"Stoppable Job with Progress"}),"\n",(0,s.jsx)(n.p,{children:"A more advanced example showing a job that reports progress and can be stopped:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'// progress_server.go\npackage main\n\nimport (\n    "fmt"\n    "time"\n    \n    "github.com/Kingson4Wu/saturncli/server"\n    "github.com/Kingson4Wu/saturncli/utils"\n)\n\nfunc main() {\n    if err := server.AddStoppableJob("progress-task", func(args map[string]string, signature string, quit chan struct{}) bool {\n        steps := 20\n        if args["steps"] != "" {\n            fmt.Sscanf(args["steps"], "%d", &steps)\n        }\n        \n        fmt.Printf("[%s] Starting task with %d steps\\n", signature, steps)\n        \n        completed := 0\n        for i := 1; i <= steps; i++ {\n            select {\n            case <-quit:\n                fmt.Printf("[%s] Task cancelled at step %d of %d (completed %d)\\n", \n                    signature, i, steps, completed)\n                return true\n            case <-time.After(200 * time.Millisecond): // Simulate work\n                completed = i\n                if i%5 == 0 { // Report progress every 5 steps\n                    fmt.Printf("[%s] Progress: %d/%d steps completed\\n", signature, i, steps)\n                }\n            }\n        }\n        \n        fmt.Printf("[%s] Task completed successfully (%d steps)\\n", signature, steps)\n        return true\n    }); err != nil {\n        panic(err)\n    }\n    \n    server.NewServer(&utils.DefaultLogger{}, "/tmp/progress.sock").Serve()\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Test it:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Start the server\ngo run progress_server.go\n\n# In another terminal, start the task\n./saturn_cli --name progress-task --param steps=30\n\n# In a third terminal, stop the task before completion\n./saturn_cli --name progress-task --stop\n"})}),"\n",(0,s.jsx)(n.h2,{id:"file-processing-example",children:"File Processing Example"}),"\n",(0,s.jsx)(n.p,{children:"Here's a practical example of processing files with error handling:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'// file_processor.go\npackage main\n\nimport (\n    "fmt"\n    "os"\n    "path/filepath"\n    "strings"\n    "time"\n    \n    "github.com/Kingson4Wu/saturncli/server"\n    "github.com/Kingson4Wu/saturncli/utils"\n)\n\nfunc main() {\n    if err := server.AddStoppableJob("file-processor", func(args map[string]string, signature string, quit chan struct{}) bool {\n        inputDir := args["input_dir"]\n        outputDir := args["output_dir"]\n        \n        if inputDir == "" || outputDir == "" {\n            fmt.Printf("[%s] ERROR: input_dir and output_dir are required\\n", signature)\n            return false\n        }\n        \n        // Verify directories exist\n        if _, err := os.Stat(inputDir); os.IsNotExist(err) {\n            fmt.Printf("[%s] ERROR: Input directory does not exist: %s\\n", signature, inputDir)\n            return false\n        }\n        \n        if err := os.MkdirAll(outputDir, 0755); err != nil {\n            fmt.Printf("[%s] ERROR: Failed to create output directory: %v\\n", signature, err)\n            return false\n        }\n        \n        fmt.Printf("[%s] Processing files from %s to %s\\n", signature, inputDir, outputDir)\n        \n        // Find all .txt files\n        files, err := filepath.Glob(filepath.Join(inputDir, "*.txt"))\n        if err != nil {\n            fmt.Printf("[%s] ERROR: Failed to find files: %v\\n", signature, err)\n            return false\n        }\n        \n        processed := 0\n        for _, file := range files {\n            select {\n            case <-quit:\n                fmt.Printf("[%s] Processing cancelled, %d files processed\\n", signature, processed)\n                return true\n            default:\n                if processFile(file, outputDir, signature) {\n                    processed++\n                    fmt.Printf("[%s] Processed: %s\\n", signature, filepath.Base(file))\n                }\n            }\n        }\n        \n        fmt.Printf("[%s] Completed processing %d files\\n", signature, processed)\n        return true\n    }); err != nil {\n        panic(err)\n    }\n    \n    server.NewServer(&utils.DefaultLogger{}, "/tmp/file-processor.sock").Serve()\n}\n\nfunc processFile(inputPath, outputDir, signature string) bool {\n    // Simulate file processing (in real implementation, you\'d read, process, and write the file)\n    time.Sleep(500 * time.Millisecond) // Simulate processing time\n    \n    filename := filepath.Base(inputPath)\n    nameWithoutExt := strings.TrimSuffix(filename, filepath.Ext(filename))\n    outputPath := filepath.Join(outputDir, fmt.Sprintf("%s_processed.txt", nameWithoutExt))\n    \n    // In a real implementation, you would actually process the file content\n    fmt.Printf("[%s] Would write processed content to: %s\\n", signature, outputPath)\n    \n    return true\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"embedding-in-a-web-service",children:"Embedding in a Web Service"}),"\n",(0,s.jsx)(n.p,{children:"This example shows how to embed Saturn CLI in a web service:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'// web_service.go\npackage main\n\nimport (\n    "encoding/json"\n    "fmt"\n    "log"\n    "net/http"\n    \n    "github.com/Kingson4Wu/saturncli/client"\n    "github.com/Kingson4Wu/saturncli/base"\n    "github.com/Kingson4Wu/saturncli/server"\n    "github.com/Kingson4Wu/saturncli/utils"\n)\n\ntype WebService struct {\n    saturnClient *client.cli\n}\n\ntype JobRequest struct {\n    Name   string            `json:"name"`\n    Params map[string]string `json:"params"`\n}\n\ntype JobResponse struct {\n    Success bool   `json:"success"`\n    Result  string `json:"result"`\n}\n\nfunc NewWebService() *WebService {\n    return &WebService{\n        saturnClient: client.NewClient(&utils.DefaultLogger{}, "/tmp/web_service.sock"),\n    }\n}\n\nfunc (ws *WebService) JobHandler(w http.ResponseWriter, r *http.Request) {\n    if r.Method != http.MethodPost {\n        http.Error(w, "Method not allowed", http.StatusMethodNotAllowed)\n        return\n    }\n    \n    var req JobRequest\n    if err := json.NewDecoder(r.Body).Decode(&req); err != nil {\n        http.Error(w, "Invalid JSON", http.StatusBadRequest)\n        return\n    }\n    \n    result := ws.saturnClient.Run(&client.Task{\n        Name:   req.Name,\n        Params: req.Params,\n    })\n    \n    response := JobResponse{\n        Success: result == base.SUCCESS,\n        Result:  string(result),\n    }\n    \n    w.Header().Set("Content-Type", "application/json")\n    json.NewEncoder(w).Encode(response)\n}\n\nfunc main() {\n    // Set up Saturn jobs\n    if err := server.AddJob("data-processor", func(args map[string]string, signature string) bool {\n        fmt.Printf("[%s] Processing data with args: %+v\\n", signature, args)\n        // Simulate processing\n        // In real implementation, perform actual data processing\n        return true\n    }); err != nil {\n        log.Fatal("Failed to register job:", err)\n    }\n    \n    // Start Saturn server in a goroutine\n    go func() {\n        fmt.Println("Starting Saturn server...")\n        server.NewServer(&utils.DefaultLogger{}, "/tmp/web_service.sock").Serve()\n    }()\n    \n    // Give server time to start\n    time.Sleep(100 * time.Millisecond)\n    \n    // Set up web API\n    webService := NewWebService()\n    http.HandleFunc("/job", webService.JobHandler)\n    \n    fmt.Println("Starting web service on :8080")\n    log.Fatal(http.ListenAndServe(":8080", nil))\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"testing-your-examples",children:"Testing Your Examples"}),"\n",(0,s.jsx)(n.p,{children:"Create a simple test for your Saturn jobs:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'// job_test.go\npackage main\n\nimport (\n    "bytes"\n    "fmt"\n    "strings"\n    "testing"\n    "time"\n)\n\ntype TestLogger struct {\n    buffer *bytes.Buffer\n}\n\nfunc (tl *TestLogger) Info(msg string)    { tl.buffer.WriteString("INFO: " + msg + "\\n") }\nfunc (tl *TestLogger) Infof(format string, args ...interface{}) { tl.buffer.WriteString("INFO: " + fmt.Sprintf(format, args...) + "\\n") }\nfunc (tl *TestLogger) Error(msg string)   { tl.buffer.WriteString("ERROR: " + msg + "\\n") }\nfunc (tl *TestLogger) Errorf(format string, args ...interface{}) { tl.buffer.WriteString("ERROR: " + fmt.Sprintf(format, args...) + "\\n") }\nfunc (tl *TestLogger) Debug(msg string)   { tl.buffer.WriteString("DEBUG: " + msg + "\\n") }\nfunc (tl *TestLogger) Debugf(format string, args ...interface{}) { tl.buffer.WriteString("DEBUG: " + fmt.Sprintf(format, args...) + "\\n") }\nfunc (tl *TestLogger) Warn(msg string)    { tl.buffer.WriteString("WARN: " + msg + "\\n") }\nfunc (tl *TestLogger) Warnf(format string, args ...interface{})  { tl.buffer.WriteString("WARN: " + fmt.Sprintf(format, args...) + "\\n") }\n\nfunc TestEchoJob(t *testing.T) {\n    var logBuffer bytes.Buffer\n    testLogger := &TestLogger{buffer: &logBuffer}\n    \n    // Test parameters\n    args := map[string]string{"message": "Test message"}\n    signature := "test-signature"\n    \n    // Create job handler function\n    handler := func(jobArgs map[string]string, jobSignature string) bool {\n        message := jobArgs["message"]\n        testLogger.Infof("Echo: %s (Signature: %s)", message, jobSignature)\n        return true\n    }\n    \n    // Execute the job\n    result := handler(args, signature)\n    \n    if !result {\n        t.Error("Expected job to return true")\n    }\n    \n    logOutput := logBuffer.String()\n    if !strings.Contains(logOutput, "Test message") {\n        t.Errorf("Expected log to contain \'Test message\', got: %s", logOutput)\n    }\n    \n    if !strings.Contains(logOutput, "test-signature") {\n        t.Errorf("Expected log to contain signature, got: %s", logOutput)\n    }\n}\n\nfunc TestStoppableJob(t *testing.T) {\n    quit := make(chan struct{})\n    done := make(chan bool, 1)\n    \n    handler := func(args map[string]string, signature string, quitChan chan struct{}) bool {\n        iterations := 0\n        maxIterations := 10\n        \n        for iterations < maxIterations {\n            select {\n            case <-quitChan:\n                return true\n            default:\n                iterations++\n                time.Sleep(10 * time.Millisecond) // Small sleep for the test\n            }\n        }\n        \n        return true\n    }\n    \n    args := map[string]string{}\n    signature := "test-stop"\n    \n    // Run the handler in a goroutine\n    go func() {\n        result := handler(args, signature, quit)\n        done <- result\n    }()\n    \n    // Allow some iterations\n    time.Sleep(50 * time.Millisecond)\n    \n    // Close the quit channel to stop the job\n    close(quit)\n    \n    // Wait for the handler to finish\n    select {\n    case result := <-done:\n        if !result {\n            t.Error("Expected stoppable job to return true after being stopped")\n        }\n    case <-time.After(1 * time.Second):\n        t.Error("Test timed out")\n    }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"running-examples",children:"Running Examples"}),"\n",(0,s.jsx)(n.p,{children:"To run any of these examples:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Create a new directory for the example"}),"\n",(0,s.jsx)(n.li,{children:"Create the Go file with the example code"}),"\n",(0,s.jsxs)(n.li,{children:["Run ",(0,s.jsx)(n.code,{children:"go mod init example_name"})]}),"\n",(0,s.jsxs)(n.li,{children:["Run ",(0,s.jsx)(n.code,{children:"go get github.com/Kingson4Wu/saturncli"})]}),"\n",(0,s.jsxs)(n.li,{children:["Build with ",(0,s.jsx)(n.code,{children:"go build -o example_name main.go"})]}),"\n",(0,s.jsxs)(n.li,{children:["Run the server: ",(0,s.jsx)(n.code,{children:"./example_name"})]}),"\n",(0,s.jsx)(n.li,{children:"In another terminal, use the Saturn CLI or create a client to trigger jobs"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"source-code-references",children:"Source Code References"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/Kingson4Wu/saturncli/blob/main/examples/server/server.go",children:"Full server example"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/Kingson4Wu/saturncli/blob/main/examples/client/client.go",children:"Full client example"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/Kingson4Wu/saturncli/blob/main/client/client.go",children:"Client implementation"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/Kingson4Wu/saturncli/blob/main/server/server.go",children:"Server implementation"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Review the ",(0,s.jsx)(n.a,{href:"/saturncli/docs/client-api",children:"API Reference"})," for detailed function documentation"]}),"\n",(0,s.jsxs)(n.li,{children:["Check out the ",(0,s.jsx)(n.a,{href:"/saturncli/docs/embedding",children:"Embedding Guide"})," for more integration patterns"]}),"\n",(0,s.jsxs)(n.li,{children:["Look at the ",(0,s.jsx)(n.a,{href:"/saturncli/docs/architecture",children:"Architecture"})," to understand the system design"]}),"\n"]})]})}function g(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>o});var r=t(6540);const s={},i=r.createContext(s);function a(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);