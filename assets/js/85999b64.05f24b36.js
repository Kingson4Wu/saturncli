"use strict";(globalThis.webpackChunksaturn_cli_docs=globalThis.webpackChunksaturn_cli_docs||[]).push([[343],{3085:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"client-api","title":"Client API Reference - Go Library for Saturn CLI Job Execution","description":"Complete API reference for Saturn CLI client package. Learn how to trigger jobs programmatically in your Go applications using Unix domain sockets communication.","source":"@site/docs/client-api.md","sourceDirName":".","slug":"/client-api","permalink":"/saturncli/docs/client-api","draft":false,"unlisted":false,"editUrl":"https://github.com/Kingson4Wu/saturncli/tree/main/documentation/docs/client-api.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Client API Reference - Go Library for Saturn CLI Job Execution","description":"Complete API reference for Saturn CLI client package. Learn how to trigger jobs programmatically in your Go applications using Unix domain sockets communication.","keywords":["saturn cli client api","go client library","unix domain sockets api","go job execution api","saturn cli programming interface","golang client"]},"sidebar":"tutorialSidebar","previous":{"title":"Saturn CLI Architecture - Client Server Design & Unix Socket Communication","permalink":"/saturncli/docs/architecture"},"next":{"title":"Server API Reference - Go Server Toolkit for Job Execution","permalink":"/saturncli/docs/server-api"}}');var r=i(4848),t=i(8453);const a={sidebar_position:3,title:"Client API Reference - Go Library for Saturn CLI Job Execution",description:"Complete API reference for Saturn CLI client package. Learn how to trigger jobs programmatically in your Go applications using Unix domain sockets communication.",keywords:["saturn cli client api","go client library","unix domain sockets api","go job execution api","saturn cli programming interface","golang client"]},l="Client API Reference",c={},o=[{value:"Package Overview",id:"package-overview",level:2},{value:"Creating a Client",id:"creating-a-client",level:2},{value:"NewClient",id:"newclient",level:3},{value:"The Task Structure",id:"the-task-structure",level:2},{value:"Task Fields",id:"task-fields",level:3},{value:"Running Tasks",id:"running-tasks",level:2},{value:"Run",id:"run",level:3},{value:"Result Types",id:"result-types",level:2},{value:"Command-Line Interface Wrapper",id:"command-line-interface-wrapper",level:2},{value:"NewCmd",id:"newcmd",level:3},{value:"Complete Usage Example",id:"complete-usage-example",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"See Also",id:"see-also",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"client-api-reference",children:"Client API Reference"})}),"\n",(0,r.jsx)(n.p,{children:"The Saturn CLI client package provides programmatic access to the Saturn server. This document details the client API and how to use it in your Go applications for executing background jobs and managing processes."}),"\n",(0,r.jsx)(n.h2,{id:"package-overview",children:"Package Overview"}),"\n",(0,r.jsx)(n.p,{children:"The client package allows you to trigger jobs on a Saturn server from your Go code. It handles the communication protocol, parameter serialization, and result parsing."}),"\n",(0,r.jsx)(n.p,{children:"Import the client package:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'import "github.com/Kingson4Wu/saturncli/client"\n'})}),"\n",(0,r.jsx)(n.h2,{id:"creating-a-client",children:"Creating a Client"}),"\n",(0,r.jsx)(n.h3,{id:"newclient",children:"NewClient"}),"\n",(0,r.jsx)(n.p,{children:"Creates a new client instance with the specified logger and socket path:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"func NewClient(logger utils.Logger, sockPath string) *cli\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"logger"}),": A logger implementation that satisfies the ",(0,r.jsx)(n.code,{children:"utils.Logger"})," interface"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"sockPath"}),": Path to the Unix domain socket or TCP address of the server"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'cli := client.NewClient(&utils.DefaultLogger{}, "/tmp/saturn.sock")\n'})}),"\n",(0,r.jsx)(n.h2,{id:"the-task-structure",children:"The Task Structure"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"Task"})," structure represents a job to be executed on the server:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"type Task struct {\n    Name      string            // Required: Name of the job to execute\n    Args      string            // Optional: Legacy query string (merged with Params)\n    Stop      bool              // Optional: Send stop signal instead of starting job\n    Signature string            // Optional: Target specific run when stopping\n    Params    map[string]string // Optional: Structured parameters for the job\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"task-fields",children:"Task Fields"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Name"}),": Required. Identifies the job to execute on the server."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Args"}),': Optional. Legacy query string format (e.g., "id=33&ver=22") for backward compatibility. Merged with Params.']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Stop"}),": Optional. When true, sends a stop signal to the job instead of running it."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Signature"}),": Optional. When stopping, targets a specific job run by signature."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Params"}),": Optional. Structured key-value parameters for the job (e.g., ",(0,r.jsx)(n.code,{children:'map[string]string{"id": "42"}'}),")."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"running-tasks",children:"Running Tasks"}),"\n",(0,r.jsx)(n.h3,{id:"run",children:"Run"}),"\n",(0,r.jsx)(n.p,{children:"Executes a task on the Saturn server and returns the result:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"func (c *cli) Run(task *Task) base.Result\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"task"}),": Pointer to the ",(0,r.jsx)(n.code,{children:"Task"})," structure defining the job to run"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"base.Result"}),": One of ",(0,r.jsx)(n.code,{children:"base.SUCCESS"}),", ",(0,r.jsx)(n.code,{children:"base.FAILURE"}),", or ",(0,r.jsx)(n.code,{children:"base.INTERRUPT"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'result := cli.Run(&client.Task{\n    Name: "hello",\n    Params: map[string]string{\n        "id": "42",\n        "version": "2.0",\n    },\n})\n'})}),"\n",(0,r.jsx)(n.h2,{id:"result-types",children:"Result Types"}),"\n",(0,r.jsxs)(n.p,{children:["Results are returned as constants from the ",(0,r.jsx)(n.code,{children:"base"})," package:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"base.SUCCESS"}),": Job completed successfully"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"base.FAILURE"}),": Job failed during execution"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"base.INTERRUPT"}),": Job was interrupted (e.g., by stop signal)"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"command-line-interface-wrapper",children:"Command-Line Interface Wrapper"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"cmd"})," package provides a command-line interface wrapper around the client functionality:"]}),"\n",(0,r.jsx)(n.h3,{id:"newcmd",children:"NewCmd"}),"\n",(0,r.jsx)(n.p,{children:"Creates a new command-line wrapper:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"func NewCmd(logger utils.Logger, sockPath string) *cmd\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'cmd := client.NewCmd(&utils.DefaultLogger{}, "/tmp/saturn.sock")\ncmd.RunWithArgs(os.Args[1:])  // Pass command-line arguments\n'})}),"\n",(0,r.jsx)(n.h2,{id:"complete-usage-example",children:"Complete Usage Example"}),"\n",(0,r.jsx)(n.p,{children:"Here's a complete example showing how to use the client in your Go application:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "fmt"\n    \n    "github.com/Kingson4Wu/saturncli/client"\n    "github.com/Kingson4Wu/saturncli/base"\n    "github.com/Kingson4Wu/saturncli/utils"\n)\n\nfunc main() {\n    // Create a client\n    cli := client.NewClient(&utils.DefaultLogger{}, "/tmp/saturn.sock")\n    \n    // Define a task\n    task := &client.Task{\n        Name: "hello",\n        Params: map[string]string{\n            "id": "42",\n            "message": "greeting",\n        },\n    }\n    \n    // Execute the task\n    result := cli.Run(task)\n    \n    // Handle the result\n    switch result {\n    case base.SUCCESS:\n        fmt.Println("Job executed successfully!")\n    case base.INTERRUPT:\n        fmt.Println("Job was interrupted")\n    case base.FAILURE:\n        fmt.Println("Job failed")\n    default:\n        fmt.Println("Unknown result")\n    }\n    \n    // To stop a job\n    stopTask := &client.Task{\n        Name:      "long_running_job",\n        Stop:      true,\n        Signature: "specific-job-signature",  // Optional: target specific job run\n    }\n    \n    stopResult := cli.Run(stopTask)\n    fmt.Printf("Stop result: %v\\n", stopResult)\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Error Handling"}),": Always check the return result of ",(0,r.jsx)(n.code,{children:"Run()"})," calls."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Connection Management"}),": The client handles connection establishment and teardown automatically."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Parameter Validation"}),": Validate task parameters before sending them to the server."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Logging"}),": Use the logger consistently for debugging and monitoring."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Concurrency"}),": The client is safe for concurrent use by multiple goroutines."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/saturncli/docs/server-api",children:"Server API Reference"})," - For creating custom Saturn servers"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/saturncli/docs/embedding",children:"Embedding Guide"})," - For integrating Saturn into your services"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/saturncli/docs/cli-reference",children:"CLI Reference"})," - For command-line usage"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>l});var s=i(6540);const r={},t=s.createContext(r);function a(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);