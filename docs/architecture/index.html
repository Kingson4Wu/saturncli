<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-architecture" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Saturn CLI Architecture - Client Server Design &amp; Unix Socket Communication | Saturn CLI - Go Job Execution Toolkit | Unix Domain Sockets &amp; Background Jobs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="author" content="Kingson Wu"><meta data-rh="true" name="robots" content="index, follow"><meta data-rh="true" name="theme-color" content="#25c2a0"><meta data-rh="true" property="og:image" content="img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://kingson4wu.github.io/saturncli/"><meta data-rh="true" property="og:type" content="website"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="twitter:title" content="Saturn CLI Documentation - Go Job Execution Toolkit"><meta data-rh="true" name="twitter:description" content="A lightweight client/server toolkit for job execution in Go applications. Execute shell-style jobs and manage background processes."><meta data-rh="true" name="twitter:image" content="img/docusaurus-social-card.jpg"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Saturn CLI Architecture - Client Server Design &amp; Unix Socket Communication | Saturn CLI - Go Job Execution Toolkit | Unix Domain Sockets &amp; Background Jobs"><meta data-rh="true" name="description" content="Detailed architecture documentation for Saturn CLI. Learn about client-server communication, Unix domain sockets implementation, and system components for Go job execution."><meta data-rh="true" property="og:description" content="Detailed architecture documentation for Saturn CLI. Learn about client-server communication, Unix domain sockets implementation, and system components for Go job execution."><meta data-rh="true" name="keywords" content="saturn cli architecture,unix domain sockets,client server architecture,go ipc,inter-process communication,saturn cli design,go cli architecture"><link data-rh="true" rel="icon" href="/saturncli/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://kingson4wu.github.io/saturncli/docs/architecture"><link data-rh="true" rel="alternate" href="https://kingson4wu.github.io/saturncli/docs/architecture" hreflang="en"><link data-rh="true" rel="alternate" href="https://kingson4wu.github.io/saturncli/docs/architecture" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Saturn CLI Architecture - Client Server Design & Unix Socket Communication","item":"https://kingson4wu.github.io/saturncli/docs/architecture"}]}</script><link rel="alternate" type="application/rss+xml" href="/saturncli/blog/rss.xml" title="Saturn CLI - Go Job Execution Toolkit | Unix Domain Sockets &amp; Background Jobs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/saturncli/blog/atom.xml" title="Saturn CLI - Go Job Execution Toolkit | Unix Domain Sockets &amp; Background Jobs Atom Feed">




<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-XXXXXXXXXX",{anonymize_ip:!0})</script><link rel="stylesheet" href="/saturncli/assets/css/styles.6315ef1d.css">
<script src="/saturncli/assets/js/runtime~main.cc7c2c32.js" defer="defer"></script>
<script src="/saturncli/assets/js/main.40a87a84.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/saturncli/"><div class="navbar__logo"><img src="/saturncli/img/logo.svg" alt="Saturn CLI Logo" class="themedComponent_mlkZ themedComponent--light_NVdE" height="32" width="32"><img src="/saturncli/img/logo.svg" alt="Saturn CLI Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="32" width="32"></div><b class="navbar__title text--truncate">Saturn CLI</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/saturncli/docs/intro">Documentation</a><a class="navbar__item navbar__link" href="/saturncli/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/Kingson4Wu/saturncli" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/saturncli/docs/intro"><span title="Saturn CLI Documentation - Go Job Execution Toolkit" class="linkLabel_WmDU">Saturn CLI Documentation - Go Job Execution Toolkit</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/saturncli/docs/getting-started"><span title="Getting Started" class="categoryLinkLabel_W154">Getting Started</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/saturncli/docs/architecture"><span title="Core Concepts" class="categoryLinkLabel_W154">Core Concepts</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/saturncli/docs/architecture"><span title="Saturn CLI Architecture - Client Server Design &amp; Unix Socket Communication" class="linkLabel_WmDU">Saturn CLI Architecture - Client Server Design &amp; Unix Socket Communication</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/saturncli/docs/client-api"><span title="Client API Reference - Go Library for Saturn CLI Job Execution" class="linkLabel_WmDU">Client API Reference - Go Library for Saturn CLI Job Execution</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/saturncli/docs/server-api"><span title="Server API Reference - Go Server Toolkit for Job Execution" class="linkLabel_WmDU">Server API Reference - Go Server Toolkit for Job Execution</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/saturncli/docs/cli-reference"><span title="CLI Reference - Saturn Command Line Interface Guide" class="linkLabel_WmDU">CLI Reference - Saturn Command Line Interface Guide</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/saturncli/docs/embedding"><span title="Guides" class="categoryLinkLabel_W154">Guides</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/saturncli/docs/contributing"><span title="Development" class="categoryLinkLabel_W154">Development</span></a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"SoftwareApplication","name":"Saturn CLI Architecture - Client Server Design & Unix Socket Communication","headline":"Saturn CLI Architecture - Client Server Design & Unix Socket Communication","description":"Detailed architecture documentation for Saturn CLI. Learn about client-server communication, Unix domain sockets implementation, and system components for Go job execution.","applicationCategory":"DeveloperApplication","operatingSystem":["Linux","MacOS","Windows"],"offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},"author":{"@type":"Person","name":"Kingson Wu","url":"https://github.com/Kingson4Wu"},"softwareVersion":"1.0.0","isAccessibleForFree":true,"softwareHelp":{"@type":"CreativeWork","name":"Saturn CLI Documentation","url":"https://kingson4wu.github.io/saturncli/"},"featureList":["Job execution","Background processing","Unix domain sockets communication","Inter-process communication","Process management","CLI automation","Client-server architecture"]}</script><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/saturncli/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Core Concepts</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Saturn CLI Architecture - Client Server Design &amp; Unix Socket Communication</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Architecture</h1></header>
<p>This document provides an in-depth look at the Saturn CLI architecture, design principles, and system components. Understanding the architecture helps you effectively integrate Saturn CLI into your applications and troubleshoot issues related to background job execution and process management.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="high-level-architecture">High-Level Architecture<a href="#high-level-architecture" class="hash-link" aria-label="Direct link to High-Level Architecture" title="Direct link to High-Level Architecture" translate="no">​</a></h2>
<p>Saturn CLI follows a client-server architecture that enables reliable communication between Go services and shell-style jobs:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────┐    Communication    ┌──────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   Client(s)     │ ←────────────────→ │    Server(s)     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                 │   Channel (Unix    │                  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - Go Services  │    Socket/TCP)     │  - Job Registry  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - CLI Tool     │                    │  - Job Executor  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  - Other Apps   │                    │  - Connection    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────┘                    │    Handler      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                       └──────────────────┘</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="core-components">Core Components<a href="#core-components" class="hash-link" aria-label="Direct link to Core Components" title="Direct link to Core Components" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-server-component">1. Server Component<a href="#1-server-component" class="hash-link" aria-label="Direct link to 1. Server Component" title="Direct link to 1. Server Component" translate="no">​</a></h3>
<p>The Saturn server handles job registration and execution:</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="server-ser-struct">Server (<code>ser</code> struct)<a href="#server-ser-struct" class="hash-link" aria-label="Direct link to server-ser-struct" title="Direct link to server-ser-struct" translate="no">​</a></h4>
<ul>
<li class="">Manages the communication endpoint (Unix socket or TCP)</li>
<li class="">Routes incoming requests to the appropriate job handlers</li>
<li class="">Maintains the job registry</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="job-registry">Job Registry<a href="#job-registry" class="hash-link" aria-label="Direct link to Job Registry" title="Direct link to Job Registry" translate="no">​</a></h4>
<ul>
<li class="">Stores registered job handlers by name</li>
<li class="">Supports both regular and stoppable jobs</li>
<li class="">Provides thread-safe job lookup</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="job-handlers">Job Handlers<a href="#job-handlers" class="hash-link" aria-label="Direct link to Job Handlers" title="Direct link to Job Handlers" translate="no">​</a></h4>
<ul>
<li class=""><code>JobHandler</code>: Simple function that processes parameters and returns success/failure</li>
<li class=""><code>StoppableJobHandler</code>: Function with quit channel for cancellation support</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-client-component">2. Client Component<a href="#2-client-component" class="hash-link" aria-label="Direct link to 2. Client Component" title="Direct link to 2. Client Component" translate="no">​</a></h3>
<p>The Saturn client facilitates communication with the server:</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="client-cli-struct">Client (<code>cli</code> struct)<a href="#client-cli-struct" class="hash-link" aria-label="Direct link to client-cli-struct" title="Direct link to client-cli-struct" translate="no">​</a></h4>
<ul>
<li class="">Handles communication protocol (Unix socket or TCP)</li>
<li class="">Serializes job parameters</li>
<li class="">Parses server responses</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="task-structure">Task Structure<a href="#task-structure" class="hash-link" aria-label="Direct link to Task Structure" title="Direct link to Task Structure" translate="no">​</a></h4>
<ul>
<li class="">Encapsulates job execution parameters</li>
<li class="">Supports both structured and legacy parameter formats</li>
<li class="">Handles stop signals</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="command-interface-cmd-struct">Command Interface (<code>cmd</code> struct)<a href="#command-interface-cmd-struct" class="hash-link" aria-label="Direct link to command-interface-cmd-struct" title="Direct link to command-interface-cmd-struct" translate="no">​</a></h4>
<ul>
<li class="">Parses command-line arguments</li>
<li class="">Translates CLI flags to task parameters</li>
<li class="">Manages console output</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="communication-layer">Communication Layer<a href="#communication-layer" class="hash-link" aria-label="Direct link to Communication Layer" title="Direct link to Communication Layer" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="transport-mechanism">Transport Mechanism<a href="#transport-mechanism" class="hash-link" aria-label="Direct link to Transport Mechanism" title="Direct link to Transport Mechanism" translate="no">​</a></h3>
<p>Saturn CLI uses different transport mechanisms based on the platform:</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="unix-like-systems-macoslinux">Unix-like Systems (macOS/Linux)<a href="#unix-like-systems-macoslinux" class="hash-link" aria-label="Direct link to Unix-like Systems (macOS/Linux)" title="Direct link to Unix-like Systems (macOS/Linux)" translate="no">​</a></h4>
<ul>
<li class=""><strong>Transport</strong>: Unix domain sockets</li>
<li class=""><strong>Benefits</strong>:<!-- -->
<ul>
<li class="">Low latency communication (typically &lt; 1ms)</li>
<li class="">File system-based security with standard permissions</li>
<li class="">No network overhead or interference</li>
</ul>
</li>
<li class=""><strong>Implementation</strong>: HTTP over Unix socket</li>
<li class=""><strong>Sources</strong>: <a href="https://github.com/Kingson4Wu/saturncli/blob/main/server/server.go" target="_blank" rel="noopener noreferrer" class="">server/server.go</a></li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="windows-systems">Windows Systems<a href="#windows-systems" class="hash-link" aria-label="Direct link to Windows Systems" title="Direct link to Windows Systems" translate="no">​</a></h4>
<ul>
<li class=""><strong>Transport</strong>: TCP loopback connection</li>
<li class=""><strong>Benefits</strong>:<!-- -->
<ul>
<li class="">Consistent client interface across platforms</li>
<li class="">Standard network stack with well-understood behavior</li>
</ul>
</li>
<li class=""><strong>Implementation</strong>: HTTP over localhost (port 8096 by default)</li>
<li class=""><strong>Sources</strong>: <a href="https://github.com/Kingson4Wu/saturncli/blob/main/server/server_windows.go" target="_blank" rel="noopener noreferrer" class="">server/server_windows.go</a></li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="protocol-design">Protocol Design<a href="#protocol-design" class="hash-link" aria-label="Direct link to Protocol Design" title="Direct link to Protocol Design" translate="no">​</a></h3>
<p>The communication protocol is designed for efficiency and reliability:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Client Request:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HTTP POST /jobs/{name}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Headers: Content-Type: application/x-www-form-urlencoded</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Body: args=param1=value1&amp;param2=value2&amp;signature=uuid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Server Response:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HTTP 200 OK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Body: {&quot;result&quot;: &quot;success|failure|interrupt&quot;}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="security-model">Security Model<a href="#security-model" class="hash-link" aria-label="Direct link to Security Model" title="Direct link to Security Model" translate="no">​</a></h3>
<ul>
<li class=""><strong>Local Communication</strong>: All communication occurs on the local machine</li>
<li class=""><strong>File Permissions</strong>: Unix sockets use file system permissions for access control</li>
<li class=""><strong>Process Isolation</strong>: Only processes with appropriate permissions can access the socket</li>
<li class=""><strong>No Network Exposure</strong>: Communication never traverses network boundaries</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="design-principles">Design Principles<a href="#design-principles" class="hash-link" aria-label="Direct link to Design Principles" title="Direct link to Design Principles" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="embeddability-first">Embeddability First<a href="#embeddability-first" class="hash-link" aria-label="Direct link to Embeddability First" title="Direct link to Embeddability First" translate="no">​</a></h3>
<p>Saturn CLI is designed to be embedded directly into existing services:</p>
<ul>
<li class=""><strong>Minimal Dependencies</strong>: Only requires Go standard library and google/uuid</li>
<li class=""><strong>Lightweight</strong>: Small memory footprint (~1-2MB) and fast startup (&lt; 100ms)</li>
<li class=""><strong>Flexible Integration</strong>: Can be integrated at multiple levels (library, CLI, etc.)</li>
<li class=""><strong>Non-Intrusive</strong>: Does not require significant changes to existing codebase</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="platform-consistency">Platform Consistency<a href="#platform-consistency" class="hash-link" aria-label="Direct link to Platform Consistency" title="Direct link to Platform Consistency" translate="no">​</a></h3>
<ul>
<li class=""><strong>Cross-Platform</strong>: Consistent API and behavior across platforms</li>
<li class=""><strong>Automatic Fallback</strong>: Seamless transition between Unix sockets and TCP</li>
<li class=""><strong>Same Interface</strong>: Identical client interface regardless of transport method</li>
<li class=""><strong>Feature Parity</strong>: All functionality available on all platforms</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="job-lifecycle-management">Job Lifecycle Management<a href="#job-lifecycle-management" class="hash-link" aria-label="Direct link to Job Lifecycle Management" title="Direct link to Job Lifecycle Management" translate="no">​</a></h3>
<ul>
<li class=""><strong>Registration</strong>: Jobs are registered with the server before execution</li>
<li class=""><strong>Execution</strong>: Jobs run synchronously with clear success/failure semantics</li>
<li class=""><strong>Cancellation</strong>: Stoppable jobs support graceful shutdown via quit channels</li>
<li class=""><strong>Monitoring</strong>: Comprehensive logging for debugging and monitoring</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="performance-optimization">Performance Optimization<a href="#performance-optimization" class="hash-link" aria-label="Direct link to Performance Optimization" title="Direct link to Performance Optimization" translate="no">​</a></h3>
<ul>
<li class=""><strong>Connection Efficiency</strong>: Reuses connections where possible</li>
<li class=""><strong>Low Overhead</strong>: Minimal serialization and marshaling</li>
<li class=""><strong>Fast Startup</strong>: Quick server initialization and job registration</li>
<li class=""><strong>Resource Management</strong>: Efficient memory and CPU usage</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="system-design">System Design<a href="#system-design" class="hash-link" aria-label="Direct link to System Design" title="Direct link to System Design" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="server-architecture">Server Architecture<a href="#server-architecture" class="hash-link" aria-label="Direct link to Server Architecture" title="Direct link to Server Architecture" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│            Saturn Server            │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ┌─────────────────────────────────┐ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │         HTTP Handler            │ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  - Route requests to jobs       │ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  - Parse parameters             │ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  - Format responses             │ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  └─────────────────────────────────┘ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│               │                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│               ▼                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ┌─────────────────────────────────┐ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │         Job Registry            │ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  - Store job handlers by name   │ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  - Thread-safe operations       │ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  └─────────────────────────────────┘ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│               │                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│               ▼                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ┌─────────────────────────────────┐ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │       Job Execution             │ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  - Run job handlers             │ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  - Handle cancellation          │ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  - Return results               │ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  └─────────────────────────────────┘ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────────────────┘</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="server-implementation-details">Server Implementation Details<a href="#server-implementation-details" class="hash-link" aria-label="Direct link to Server Implementation Details" title="Direct link to Server Implementation Details" translate="no">​</a></h4>
<ul>
<li class=""><strong>Sources</strong>: <a href="https://github.com/Kingson4Wu/saturncli/blob/main/server/server.go" target="_blank" rel="noopener noreferrer" class="">server/server.go</a>, <a href="https://github.com/Kingson4Wu/saturncli/blob/main/server/job_manager.go" target="_blank" rel="noopener noreferrer" class="">server/job_manager.go</a></li>
<li class=""><strong>Function Signature</strong>: <code>func (s *ser) Serve()</code></li>
<li class=""><strong>Error Handling</strong>: Panics on critical errors, proper cleanup on shutdown</li>
<li class=""><strong>Resource Management</strong>: Automatic cleanup of socket files on startup</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="client-architecture">Client Architecture<a href="#client-architecture" class="hash-link" aria-label="Direct link to Client Architecture" title="Direct link to Client Architecture" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             Saturn Client           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├─────────────────────────────────────┤</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ┌─────────────────────────────────┐ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │         Task Creation           │ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  - Build job parameters         │ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  - Format request               │ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  └─────────────────────────────────┘ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│               │                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│               ▼                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ┌─────────────────────────────────┐ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │      HTTP Communication         │ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  - Connect via Unix socket      │ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  - Send request to server       │ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  - Receive response             │ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  └─────────────────────────────────┘ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│               │                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│               ▼                     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ┌─────────────────────────────────┐ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │        Result Processing        │ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  - Parse server response        │ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  - Return to caller             │ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  └─────────────────────────────────┘ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────────────────┘</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="client-implementation-details">Client Implementation Details<a href="#client-implementation-details" class="hash-link" aria-label="Direct link to Client Implementation Details" title="Direct link to Client Implementation Details" translate="no">​</a></h4>
<ul>
<li class=""><strong>Sources</strong>: <a href="https://github.com/Kingson4Wu/saturncli/blob/main/client/client.go" target="_blank" rel="noopener noreferrer" class="">client/client.go</a>, <a href="https://github.com/Kingson4Wu/saturncli/blob/main/client/cmd.go" target="_blank" rel="noopener noreferrer" class="">client/cmd.go</a></li>
<li class=""><strong>Function Signature</strong>: <code>func (c *cli) Run(task *Task) base.Result</code></li>
<li class=""><strong>Transport Abstraction</strong>: Same interface for both Unix and TCP transports</li>
<li class=""><strong>Connection Management</strong>: Automatic connection establishment and reuse</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="data-flow">Data Flow<a href="#data-flow" class="hash-link" aria-label="Direct link to Data Flow" title="Direct link to Data Flow" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="job-registration-flow">Job Registration Flow<a href="#job-registration-flow" class="hash-link" aria-label="Direct link to Job Registration Flow" title="Direct link to Job Registration Flow" translate="no">​</a></h3>
<ol>
<li class=""><strong>Service Initialization</strong>: Service creates a job registry</li>
<li class=""><strong>Handler Registration</strong>: Job handlers are registered with names</li>
<li class=""><strong>Server Startup</strong>: Saturn server starts listening on socket</li>
<li class=""><strong>Registry Association</strong>: Registry is associated with the server</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="job-execution-flow">Job Execution Flow<a href="#job-execution-flow" class="hash-link" aria-label="Direct link to Job Execution Flow" title="Direct link to Job Execution Flow" translate="no">​</a></h3>
<ol>
<li class=""><strong>Client Request</strong>: Client creates a Task with job name and parameters</li>
<li class=""><strong>Request Serialization</strong>: Task parameters are serialized</li>
<li class=""><strong>Server Communication</strong>: HTTP request sent to server via socket</li>
<li class=""><strong>Job Lookup</strong>: Server looks up job handler by name</li>
<li class=""><strong>Parameter Parsing</strong>: Request parameters are parsed</li>
<li class=""><strong>Handler Execution</strong>: Job handler is executed with parameters</li>
<li class=""><strong>Result Reporting</strong>: Execution result is returned to client</li>
<li class=""><strong>Response Processing</strong>: Client processes and returns the result</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="stop-operation-flow">Stop Operation Flow<a href="#stop-operation-flow" class="hash-link" aria-label="Direct link to Stop Operation Flow" title="Direct link to Stop Operation Flow" translate="no">​</a></h3>
<ol>
<li class=""><strong>Stop Request</strong>: Client sends request with Stop flag set to true</li>
<li class=""><strong>Server Recognition</strong>: Server recognizes as stop request</li>
<li class=""><strong>Job Lookup</strong>: Server identifies the running job instance</li>
<li class=""><strong>Quit Channel</strong>: Server closes the quit channel for the job</li>
<li class=""><strong>Handler Response</strong>: Job handler responds to quit signal</li>
<li class=""><strong>Clean Shutdown</strong>: Job handler performs cleanup if needed</li>
<li class=""><strong>Result Return</strong>: Success result returned to client</li>
</ol>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="concurrency-model">Concurrency Model<a href="#concurrency-model" class="hash-link" aria-label="Direct link to Concurrency Model" title="Direct link to Concurrency Model" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="server-concurrency">Server Concurrency<a href="#server-concurrency" class="hash-link" aria-label="Direct link to Server Concurrency" title="Direct link to Server Concurrency" translate="no">​</a></h3>
<ul>
<li class=""><strong>Per-Request Goroutines</strong>: Each request is handled in a separate goroutine</li>
<li class=""><strong>Registry Access</strong>: Job registry operations are thread-safe</li>
<li class=""><strong>Handler Execution</strong>: Job handlers execute in their own goroutines</li>
<li class=""><strong>Stoppable Jobs</strong>: Have dedicated quit channels for cancellation</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="client-concurrency">Client Concurrency<a href="#client-concurrency" class="hash-link" aria-label="Direct link to Client Concurrency" title="Direct link to Client Concurrency" translate="no">​</a></h3>
<ul>
<li class=""><strong>Thread-Safe</strong>: Client instances can be safely shared across goroutines</li>
<li class=""><strong>Connection Pooling</strong>: Internal HTTP clients may reuse connections</li>
<li class=""><strong>Request Isolation</strong>: Each request is independent of others</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="error-handling">Error Handling<a href="#error-handling" class="hash-link" aria-label="Direct link to Error Handling" title="Direct link to Error Handling" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="client-side-errors">Client-Side Errors<a href="#client-side-errors" class="hash-link" aria-label="Direct link to Client-Side Errors" title="Direct link to Client-Side Errors" translate="no">​</a></h3>
<ul>
<li class=""><strong>Connection Failures</strong>: Cannot establish connection to server</li>
<li class=""><strong>Network Issues</strong>: Communication timeouts or interruptions</li>
<li class=""><strong>Invalid Parameters</strong>: Malformed task parameters</li>
<li class=""><strong>Server Errors</strong>: Server-side problems (5xx responses)</li>
<li class=""><strong>Error Handling Pattern</strong>: Uses standard Go error handling with descriptive messages</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="server-side-errors">Server-Side Errors<a href="#server-side-errors" class="hash-link" aria-label="Direct link to Server-Side Errors" title="Direct link to Server-Side Errors" translate="no">​</a></h3>
<ul>
<li class=""><strong>Job Registration</strong>: Failed to register job handlers</li>
<li class=""><strong>Job Execution</strong>: Errors during job execution</li>
<li class=""><strong>Resource Issues</strong>: Memory, disk, or other resource constraints</li>
<li class=""><strong>Socket Issues</strong>: Problems creating or listening on socket</li>
<li class=""><strong>Error Handling Pattern</strong>: Panics for critical errors, logging for recoverable issues</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="error-propagation">Error Propagation<a href="#error-propagation" class="hash-link" aria-label="Direct link to Error Propagation" title="Direct link to Error Propagation" translate="no">​</a></h3>
<ul>
<li class=""><strong>Clear Semantics</strong>: Well-defined success, failure, and interrupt states</li>
<li class=""><strong>Logging</strong>: Comprehensive logging for debugging</li>
<li class=""><strong>Result Reporting</strong>: Clear result codes to clients</li>
<li class=""><strong>Graceful Degradation</strong>: System continues operating when possible</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="performance-characteristics">Performance Characteristics<a href="#performance-characteristics" class="hash-link" aria-label="Direct link to Performance Characteristics" title="Direct link to Performance Characteristics" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="latency">Latency<a href="#latency" class="hash-link" aria-label="Direct link to Latency" title="Direct link to Latency" translate="no">​</a></h3>
<ul>
<li class=""><strong>Local Communication</strong>: Sub-millisecond communication on same machine (typically 0.1-0.5ms)</li>
<li class=""><strong>Job Startup</strong>: Fast job initialization due to direct function calls (&lt; 1ms)</li>
<li class=""><strong>Response Time</strong>: Typically under 10ms for simple jobs including network overhead</li>
<li class=""><strong>Platform Differences</strong>: Unix sockets ~30% faster than TCP on localhost</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="throughput">Throughput<a href="#throughput" class="hash-link" aria-label="Direct link to Throughput" title="Direct link to Throughput" translate="no">​</a></h3>
<ul>
<li class=""><strong>Concurrent Jobs</strong>: Handles multiple simultaneous job requests (tested up to 1000 concurrent)</li>
<li class=""><strong>Connection Reuse</strong>: Efficient connection handling with connection reuse</li>
<li class=""><strong>Resource Usage</strong>: Low memory overhead (~1KB per job execution)</li>
<li class=""><strong>CPU Usage</strong>: Minimal CPU overhead for communication layer</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="scalability">Scalability<a href="#scalability" class="hash-link" aria-label="Direct link to Scalability" title="Direct link to Scalability" translate="no">​</a></h3>
<ul>
<li class=""><strong>Process Level</strong>: Designed for single-process usage with high efficiency</li>
<li class=""><strong>Lightweight</strong>: Minimal resource requirements (typically &lt; 5MB memory)</li>
<li class=""><strong>Embeddable</strong>: Can be integrated into multiple service instances</li>
<li class=""><strong>Performance Limits</strong>: Primarily limited by job handler performance, not communication layer</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="security-considerations">Security Considerations<a href="#security-considerations" class="hash-link" aria-label="Direct link to Security Considerations" title="Direct link to Security Considerations" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="communication-security">Communication Security<a href="#communication-security" class="hash-link" aria-label="Direct link to Communication Security" title="Direct link to Communication Security" translate="no">​</a></h3>
<ul>
<li class=""><strong>Local Only</strong>: Communication restricted to same machine</li>
<li class=""><strong>Socket Permissions</strong>: Uses file system permissions on Unix systems</li>
<li class=""><strong>No Network Exposure</strong>: No external network interface</li>
<li class=""><strong>Process Isolation</strong>: OS-level process isolation provides additional security</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="input-validation">Input Validation<a href="#input-validation" class="hash-link" aria-label="Direct link to Input Validation" title="Direct link to Input Validation" translate="no">​</a></h3>
<ul>
<li class=""><strong>Parameter Sanitization</strong>: Should validate input parameters in job handlers</li>
<li class=""><strong>Path Validation</strong>: Verify file paths to prevent directory traversal</li>
<li class=""><strong>Command Injection</strong>: Be careful with parameters passed to shell commands</li>
<li class=""><strong>SQL Injection</strong>: If job handlers execute database queries, use parameterized queries</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="access-control">Access Control<a href="#access-control" class="hash-link" aria-label="Direct link to Access Control" title="Direct link to Access Control" translate="no">​</a></h3>
<ul>
<li class=""><strong>Process Permissions</strong>: Only processes with appropriate file permissions can access socket</li>
<li class=""><strong>User Isolation</strong>: Separate user processes are isolated by OS</li>
<li class=""><strong>Container Security</strong>: Works well in containerized environments with proper volume mounting</li>
<li class=""><strong>Security Best Practices</strong>: Run with minimal required privileges</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="integration-patterns">Integration Patterns<a href="#integration-patterns" class="hash-link" aria-label="Direct link to Integration Patterns" title="Direct link to Integration Patterns" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="service-embedding">Service Embedding<a href="#service-embedding" class="hash-link" aria-label="Direct link to Service Embedding" title="Direct link to Service Embedding" translate="no">​</a></h3>
<p>Saturn CLI is designed to be embedded into existing services, allowing for:</p>
<ul>
<li class=""><strong>Tight Integration</strong>: Jobs can access service internals directly</li>
<li class=""><strong>Shared State</strong>: Jobs can utilize service resources and context</li>
<li class=""><strong>Unified Logging</strong>: Consistent logging across service and jobs</li>
<li class=""><strong>Common Configuration</strong>: Shared configuration management and initialization</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="standalone-usage">Standalone Usage<a href="#standalone-usage" class="hash-link" aria-label="Direct link to Standalone Usage" title="Direct link to Standalone Usage" translate="no">​</a></h3>
<p>When used as a standalone tool:</p>
<ul>
<li class=""><strong>CLI Interface</strong>: Command-line interface for direct job execution</li>
<li class=""><strong>External Integration</strong>: Can be called from scripts or external tools</li>
<li class=""><strong>Reference Implementation</strong>: Demonstrates Saturn capabilities and best practices</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="implementation-details">Implementation Details<a href="#implementation-details" class="hash-link" aria-label="Direct link to Implementation Details" title="Direct link to Implementation Details" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="source-code-organization">Source Code Organization<a href="#source-code-organization" class="hash-link" aria-label="Direct link to Source Code Organization" title="Direct link to Source Code Organization" translate="no">​</a></h3>
<ul>
<li class=""><strong><a href="https://github.com/Kingson4Wu/saturncli/tree/main/client" target="_blank" rel="noopener noreferrer" class="">client/</a></strong>: Client-side implementation</li>
<li class=""><strong><a href="https://github.com/Kingson4Wu/saturncli/tree/main/server" target="_blank" rel="noopener noreferrer" class="">server/</a></strong>: Server-side implementation</li>
<li class=""><strong><a href="https://github.com/Kingson4Wu/saturncli/tree/main/base" target="_blank" rel="noopener noreferrer" class="">base/</a></strong>: Shared types and constants</li>
<li class=""><strong><a href="https://github.com/Kingson4Wu/saturncli/tree/main/utils" target="_blank" rel="noopener noreferrer" class="">utils/</a></strong>: Utility functions</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="key-data-structures">Key Data Structures<a href="#key-data-structures" class="hash-link" aria-label="Direct link to Key Data Structures" title="Direct link to Key Data Structures" translate="no">​</a></h3>
<p><strong>Task Structure</strong> (<a href="https://github.com/Kingson4Wu/saturncli/blob/main/client/cmd.go" target="_blank" rel="noopener noreferrer" class="">client/cmd.go</a>):</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> Task </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Name      </span><span class="token builtin">string</span><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// Job name to execute</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Args      </span><span class="token builtin">string</span><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// Legacy query string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Stop      </span><span class="token builtin">bool</span><span class="token plain">              </span><span class="token comment" style="color:#999988;font-style:italic">// Stop signal flag</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Signature </span><span class="token builtin">string</span><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// Job run identifier</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Params    </span><span class="token keyword" style="color:#00009f">map</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">string</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Structured parameters</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p><strong>Job Handler Types</strong> (<a href="https://github.com/Kingson4Wu/saturncli/blob/main/server/job_manager.go" target="_blank" rel="noopener noreferrer" class="">server/job_manager.go</a>):</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> JobHandler </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">args </span><span class="token keyword" style="color:#00009f">map</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> signature </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">bool</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> StoppableJobHandler </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">args </span><span class="token keyword" style="color:#00009f">map</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> signature </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> quit </span><span class="token keyword" style="color:#00009f">chan</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">bool</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="future-extensibility">Future Extensibility<a href="#future-extensibility" class="hash-link" aria-label="Direct link to Future Extensibility" title="Direct link to Future Extensibility" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="potential-enhancements">Potential Enhancements<a href="#potential-enhancements" class="hash-link" aria-label="Direct link to Potential Enhancements" title="Direct link to Potential Enhancements" translate="no">​</a></h3>
<p>The architecture supports possible future enhancements:</p>
<ul>
<li class=""><strong>Remote Servers</strong>: Potential for secure remote job execution with authentication</li>
<li class=""><strong>Job Queuing</strong>: Asynchronous job queueing capabilities with priority management</li>
<li class=""><strong>Metrics Collection</strong>: Built-in monitoring and metrics with Prometheus integration</li>
<li class=""><strong>Authentication</strong>: Enhanced security for multi-tenant scenarios with user contexts</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="troubleshooting">Troubleshooting<a href="#troubleshooting" class="hash-link" aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="common-issues">Common Issues<a href="#common-issues" class="hash-link" aria-label="Direct link to Common Issues" title="Direct link to Common Issues" translate="no">​</a></h3>
<ol>
<li class=""><strong>Socket Permission Errors</strong>: Check file permissions on socket directory</li>
<li class=""><strong>Connection Refused</strong>: Verify server is running and socket path matches</li>
<li class=""><strong>Job Not Found</strong>: Confirm job was registered before client request</li>
<li class=""><strong>Timeout Issues</strong>: Increase timeout values for long-running jobs</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="debugging">Debugging<a href="#debugging" class="hash-link" aria-label="Direct link to Debugging" title="Direct link to Debugging" translate="no">​</a></h3>
<ul>
<li class=""><strong>Enable Debug Logging</strong>: Use logger with debug level enabled</li>
<li class=""><strong>Socket Path Verification</strong>: Ensure client and server use same socket path</li>
<li class=""><strong>Job Registration Timing</strong>: Ensure jobs are registered before client calls</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="see-also">See Also<a href="#see-also" class="hash-link" aria-label="Direct link to See Also" title="Direct link to See Also" translate="no">​</a></h2>
<ul>
<li class=""><a class="" href="/saturncli/docs/client-api">Client API Reference</a> - Technical details about client interface</li>
<li class=""><a class="" href="/saturncli/docs/server-api">Server API Reference</a> - Technical details about server interface</li>
<li class=""><a class="" href="/saturncli/docs/embedding">Embedding Guide</a> - Practical integration guidance</li>
<li class=""><a class="" href="/saturncli/docs/cli-reference">CLI Reference</a> - Command-line interface documentation</li>
<li class=""><a class="" href="/saturncli/docs/examples">Examples</a> - Real-world usage examples</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/Kingson4Wu/saturncli/tree/main/documentation/docs/architecture.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/saturncli/docs/getting-started/examples"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Getting Started Examples</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/saturncli/docs/client-api"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Client API Reference - Go Library for Saturn CLI Job Execution</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#high-level-architecture" class="table-of-contents__link toc-highlight">High-Level Architecture</a></li><li><a href="#core-components" class="table-of-contents__link toc-highlight">Core Components</a><ul><li><a href="#1-server-component" class="table-of-contents__link toc-highlight">1. Server Component</a></li><li><a href="#2-client-component" class="table-of-contents__link toc-highlight">2. Client Component</a></li></ul></li><li><a href="#communication-layer" class="table-of-contents__link toc-highlight">Communication Layer</a><ul><li><a href="#transport-mechanism" class="table-of-contents__link toc-highlight">Transport Mechanism</a></li><li><a href="#protocol-design" class="table-of-contents__link toc-highlight">Protocol Design</a></li><li><a href="#security-model" class="table-of-contents__link toc-highlight">Security Model</a></li></ul></li><li><a href="#design-principles" class="table-of-contents__link toc-highlight">Design Principles</a><ul><li><a href="#embeddability-first" class="table-of-contents__link toc-highlight">Embeddability First</a></li><li><a href="#platform-consistency" class="table-of-contents__link toc-highlight">Platform Consistency</a></li><li><a href="#job-lifecycle-management" class="table-of-contents__link toc-highlight">Job Lifecycle Management</a></li><li><a href="#performance-optimization" class="table-of-contents__link toc-highlight">Performance Optimization</a></li></ul></li><li><a href="#system-design" class="table-of-contents__link toc-highlight">System Design</a><ul><li><a href="#server-architecture" class="table-of-contents__link toc-highlight">Server Architecture</a></li><li><a href="#client-architecture" class="table-of-contents__link toc-highlight">Client Architecture</a></li></ul></li><li><a href="#data-flow" class="table-of-contents__link toc-highlight">Data Flow</a><ul><li><a href="#job-registration-flow" class="table-of-contents__link toc-highlight">Job Registration Flow</a></li><li><a href="#job-execution-flow" class="table-of-contents__link toc-highlight">Job Execution Flow</a></li><li><a href="#stop-operation-flow" class="table-of-contents__link toc-highlight">Stop Operation Flow</a></li></ul></li><li><a href="#concurrency-model" class="table-of-contents__link toc-highlight">Concurrency Model</a><ul><li><a href="#server-concurrency" class="table-of-contents__link toc-highlight">Server Concurrency</a></li><li><a href="#client-concurrency" class="table-of-contents__link toc-highlight">Client Concurrency</a></li></ul></li><li><a href="#error-handling" class="table-of-contents__link toc-highlight">Error Handling</a><ul><li><a href="#client-side-errors" class="table-of-contents__link toc-highlight">Client-Side Errors</a></li><li><a href="#server-side-errors" class="table-of-contents__link toc-highlight">Server-Side Errors</a></li><li><a href="#error-propagation" class="table-of-contents__link toc-highlight">Error Propagation</a></li></ul></li><li><a href="#performance-characteristics" class="table-of-contents__link toc-highlight">Performance Characteristics</a><ul><li><a href="#latency" class="table-of-contents__link toc-highlight">Latency</a></li><li><a href="#throughput" class="table-of-contents__link toc-highlight">Throughput</a></li><li><a href="#scalability" class="table-of-contents__link toc-highlight">Scalability</a></li></ul></li><li><a href="#security-considerations" class="table-of-contents__link toc-highlight">Security Considerations</a><ul><li><a href="#communication-security" class="table-of-contents__link toc-highlight">Communication Security</a></li><li><a href="#input-validation" class="table-of-contents__link toc-highlight">Input Validation</a></li><li><a href="#access-control" class="table-of-contents__link toc-highlight">Access Control</a></li></ul></li><li><a href="#integration-patterns" class="table-of-contents__link toc-highlight">Integration Patterns</a><ul><li><a href="#service-embedding" class="table-of-contents__link toc-highlight">Service Embedding</a></li><li><a href="#standalone-usage" class="table-of-contents__link toc-highlight">Standalone Usage</a></li></ul></li><li><a href="#implementation-details" class="table-of-contents__link toc-highlight">Implementation Details</a><ul><li><a href="#source-code-organization" class="table-of-contents__link toc-highlight">Source Code Organization</a></li><li><a href="#key-data-structures" class="table-of-contents__link toc-highlight">Key Data Structures</a></li></ul></li><li><a href="#future-extensibility" class="table-of-contents__link toc-highlight">Future Extensibility</a><ul><li><a href="#potential-enhancements" class="table-of-contents__link toc-highlight">Potential Enhancements</a></li></ul></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a><ul><li><a href="#common-issues" class="table-of-contents__link toc-highlight">Common Issues</a></li><li><a href="#debugging" class="table-of-contents__link toc-highlight">Debugging</a></li></ul></li><li><a href="#see-also" class="table-of-contents__link toc-highlight">See Also</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/saturncli/docs/getting-started">Getting Started</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/Kingson4Wu/saturncli/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Discussions<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/Kingson4Wu/saturncli" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Saturn CLI, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>